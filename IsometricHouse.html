<html>
  <head>
    <title>Isometric House</title>
  </head>
  <body>
    <!--The three.js library-->
    <script src="js/three.js"> </script>
    <!--Trackball library-->
    <script src="js/OrbitControls.js"> </script>
    <!--GUI library-->
    <script src="js/dat.gui.min.js"> </script>
    <!--The object loader-->
    <script src="js/OBJLoader.js"></script>
    <!--The material loader-->
    <script src="js/MTLLoader.js"></script>


<video id="video" style="display: none; position: absolute: left: 15px; top: 75px;" src="videos/TV.mp4" controls="true" autoplay="true"></video>

    <style>
      body {
        font-family: ;

      }
    </style>
    <div>

    </div>

 <script>
<!--INCLUDE PROGRAM CODE HERE-->

	//Test Script



    //SCENE
    var scene = new THREE.Scene();
    var ratio = window.innerWidth/window.innerHeight;

    //RENDERER
    var renderer = new THREE.WebGLRenderer();
    renderer.setClearColor (0x87CEEB, 1);
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    document.body.appendChild(renderer.domElement );

    //object loader
    //var loader = new THREE.ObjectLoader();

    //LIGHTING
    var light = new THREE.SpotLight(0x50D1FF, 2);
    light.castShadow = true;
    light.position.set(-800, 800, 0);
    light.angle = Math.PI /4;
    light.penumbra = 0.05;
    light.decay = 2;
    light.distance = 1000;
    light.shadow.mapSize.width = 1024;
    light.shadow.mapSize.height = 1024;
    light.shadow.camera.near = 200;
    light.shadow.camera.far = 1000;
    scene.add(light);
    var helper = new THREE.CameraHelper(light.shadow.camera);
    scene.add(helper);

    // HOUSE
    // west wall
    var westGeometry = new THREE.BoxGeometry (20, 200, 1000);
    var westMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/brick3.jpg")});
    var westwall = new THREE.Mesh (westGeometry, westMaterial);
    westwall.color = new THREE.Color(1, 0, 1);
    westwall.position.x-=500;
    westwall.position.y=100;
    westwall.position.z=10;
    westwall.receiveshadow = true;
    // east wall
    var eastGeometry = new THREE.BoxGeometry (20, 200, 1000);
    var eastMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/brick3.jpg")});
    var eastwall = new THREE.Mesh (eastGeometry, eastMaterial);
    eastwall.color = new THREE.Color(0xFFEFD5);
    eastwall.position.x+=500;
    eastwall.position.y=100;
    eastwall.position.z=10;
    eastwall.receiveshadow = true;
    // north wall
    var northGeometry = new THREE.BoxGeometry (1000, 200, 20);
    var northMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/brick3.jpg")});
    var northwall = new THREE.Mesh (northGeometry, northMaterial);
    northwall.color = new THREE.Color(0xFFEFD5);
    northwall.position.x=00;
    northwall.position.y=100;
    northwall.position.z-=500;
    northwall.receiveshadow = true;
    // south wall left
    var south1Geometry = new THREE.BoxGeometry (400, 200, 20);
    var south1Material = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/brick3.jpg")});
    var south1wall = new THREE.Mesh (south1Geometry, south1Material);
    south1wall.position.x-=300;
    south1wall.position.y=100;
    south1wall.position.z+=500;
    south1wall.receiveshadow = true;
    // south wall right
    var south2Geometry = new THREE.BoxGeometry (500, 200, 20);
    var south2Material = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/brick3.jpg")});
    var south2wall = new THREE.Mesh (south2Geometry, south2Material);
    south2wall.position.x+=250;
    south2wall.position.y=100;
    south2wall.position.z+=500;
    south2wall.receiveshadow = true;
    //floor
    var floorGeometry = new THREE.BoxGeometry (1000, 20, 1000);
    var floorMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/timberfloor2.jpg")});
    floor = new THREE.Mesh (floorGeometry, floorMaterial);
    floor.position.set(0, 0, 0);
    //Hallway
    var eHallGeometry = new THREE.BoxGeometry (25, 200, 400);
    var eHallMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/brick3.jpg")}); //East Wall Hallway
    var eHall = new THREE.Mesh (eHallGeometry, eHallMaterial);
    eHall.position.x-=100;
    eHall.position.y+=100;
    eHall.position.z+=300;
    var wHallGeometry = new THREE.BoxGeometry (25, 200, 500);
    var wHallMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/brick3.jpg")});//West Wall Hallway
    var wHall = new THREE.Mesh (wHallGeometry, wHallMaterial);
    wHall.position.x=0;
    wHall.position.y+=100;
    wHall.position.z+=250;
    var room1HallGeometry = new THREE.BoxGeometry (400, 200, 25);
    var room1HallMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/brick3.jpg")}); //Right Room
    var room1Hall = new THREE.Mesh (room1HallGeometry, room1HallMaterial);
    room1Hall.position.x+=300;
    room1Hall.position.y+=100;
    room1Hall.position.z=0;
    var room2HallGeometry = new THREE.BoxGeometry (400, 200, 25);
    var room2HallMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/brick3.jpg")}); //Left room
    var room2Hall = new THREE.Mesh (room2HallGeometry, room2HallMaterial);
    room2Hall.position.x-=300;
    room2Hall.position.y+=100;
    room2Hall.position.z=0;

    // NATURE
    // External Light Object (Sun)
    var sunGeometry = new THREE.SphereBufferGeometry(100, 100, 100);
    var sunMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture("img/sun.jpg")});
    var sun = new THREE.Mesh(sunGeometry, sunMaterial);
    sun.castshadow = true;
    sun.receiveshadow = false;
    sun.position.set(-800, 800, 0);
    //land
    var landGeometry = new THREE.BoxGeometry (2000, 2000, 10);
    var landMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture('img/grass.jpg'), side: THREE.DoubleSide}); //Green Grass Floor
    var land = new THREE.Mesh (landGeometry, landMaterial);
    land.rotation.x = Math.PI/2;

    scene.add(new THREE.AmbientLight(new THREE.Color(1.0,1.0,1.0), 0.9)); //add light to see interior

     //load a couch object and material

    /*var mtlLoader = new THREE.MTLLoader();

    mtlLoader.load("models/sofa/sofa.mtl", function(materials){

        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);

        objLoader.load("models/sofa/sofa.obj",function(mesh){
        mesh.position.set(300, 0, 210);
        mesh.rotation.y = 4.7;
        mesh.scale.set(1, 1, 1);
        scene.add(mesh);

        });
    });*/


     //load a bed object and material
     var mtlLoader = new THREE.MTLLoader();

    mtlLoader.load("models/bed/Full_Size_Bed_with_White_Sheets_Black_V1.mtl", function(materials){

        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);

        objLoader.load("models/bed/Full_Size_Bed_with_White_Sheets_Black_V1.obj",function(mesh){
        mesh.position.set(-335, 50, 120);
        mesh.rotation.y = Math.PI;
        mesh.rotation.z = Math.PI;
        mesh.rotation.x = Math.PI / 2;
        mesh.scale.set(1, 1, 1);
           //need to change position and make bed flat with floor
        scene.add(mesh);

        });
    });
 var loader = new THREE.OBJLoader();
 var video = document.getElementById('video');


	 loader.load('models/television/monitor.obj', function ( object){

		 object.position.set(470, 50, 650);
		 object.rotation.y = Math.PI / 2;
		 object.rotation.x = 0;
		 object.scale.set(3, 3, 3);
		 scene.add (object);
	 },
				 	function ( xhr ) {

		console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

	},
	// called when loading has errors
	function ( error ) {

		console.log( 'An error happened' );

	}
);


	 var loader = new THREE.OBJLoader();


	 loader.load('models/tvunit/table.obj', function (object){

		 object.position.set(50, 30, 260);
		 object.rotation.y = 0;
		 object.scale.set(0.5, 0.5, 0.5);
		 scene.add (object);
	 },
				 	function ( xhr ) {

		console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

	},
	// called when loading has errors
	function ( error ) {

		console.log( 'An error happened' );

	}
);

	 //office desk
	  var loader = new THREE.OBJLoader();


	 loader.load('models/officedesk/desk.obj', function (object){

		 object.position.set(-100, 0, -430);
		 object.rotation.y = 0;
		 object.scale.set(0.45, 0.45, 0.45);
		 scene.add (object);
	 },
				 	function ( xhr ) {

		console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

	},
	// called when loading has errors
	function ( error ) {

		console.log( 'An error happened' );

	}
);

	  var loader = new THREE.OBJLoader();



	 loader.load('models/kitchen/Kitchen.obj', function ( object){
		 object.position.set(330, 0, -275);
		 object.rotation.y = Math.PI / 2;
		 object.scale.set(60, 60, 60);
		 scene.add (object);
	 },
				 	function ( xhr ) {

		console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

	},
	// called when loading has errors
	function ( error ) {

		console.log( 'An error happened' );

	}
);
	 //beside table
	 var mtlLoader = new THREE.MTLLoader();

    mtlLoader.load("models/bedsidetable/bedsidemtl.mtl", function(materials){

        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);

        objLoader.load("models/bedsidetable/bedsideobj.obj",function(mesh){
        mesh.position.set(-450, 0, 80);
        mesh.rotation.y = 0;
        mesh.scale.set(25, 25, 25);
        scene.add(mesh);

        });
    });

	 //office chair
	  var mtlLoader = new THREE.MTLLoader();

    mtlLoader.load("models/officechair/model.mtl", function(materials){

        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);

        objLoader.load("models/officechair/model.obj",function(mesh){
        mesh.position.set(-30, 10, -360);
        mesh.rotation.y = Math.PI / 1
		mesh.rotation.x = Math.PI / 2;
        mesh.scale.set(1, 1, 1);
        scene.add(mesh);

        });
    });

	  //Modern Closet
	  var mtlLoader = new THREE.MTLLoader();

    mtlLoader.load("models/minicupboard/modern_closet.mtl", function(materials){

        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);

        objLoader.load("models/minicupboard/modern_closet.obj",function(mesh){
        mesh.position.set(0, 200, 0);
        mesh.rotation.y = 0;
		mesh.rotation.x = 0;
        mesh.scale.set(100, 100, 100);
        scene.add(mesh);

        });
    });

	 var mtlLoader = new THREE.MTLLoader();

    mtlLoader.load("models/sofa2/sofa.mtl", function(materials){

        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);

        objLoader.load("models/sofa2/sofa.obj",function(mesh){
        mesh.position.set(250, 0, 250);
        mesh.rotation.y = 600;
        mesh.scale.set(9, 9, 9);
        scene.add(mesh);

        });
    });


	   var loader = new THREE.OBJLoader();



	 loader.load('models/wardrobe/wardrobe.obj', function ( object){
		 object.position.set(-380, 0, 450);
		 object.rotation.y = Math.PI / 1;
		 object.scale.set(43, 43, 43);
		 scene.add (object);
	 },
				 	function ( xhr ) {

		console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

	},
	// called when loading has errors
	function ( error ) {

		console.log( 'An error happened' );

	}
);

     //load a dining table object with same white material used for the bed
     var mtlLoader = new THREE.MTLLoader();

    mtlLoader.load("models/bed/Full_Size_Bed_with_White_Sheets_Black_V1.mtl", function(materials){

        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);

        objLoader.load("models/dining_table/Minimalist Dining Table.obj",function(mesh){
           //need to change position and make bed flat with floor
        mesh.position.set(-350, 0, -150);
        mesh.rotation.y = Math.PI / 2;
        mesh.rotation.z = Math.PI;
        mesh.rotation.x = Math.PI;
        mesh.scale.set(1.4, 1.4, 1.4);
        scene.add(mesh);

        });
    });

	    var mtlLoader = new THREE.MTLLoader();

    mtlLoader.load("models/sconcelight/eb_sconce_light_01.mtl", function(materials){

        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);

        objLoader.load("models/sconcelight/eb_sconce_light_01.obj",function(mesh){
           //need to change position and make bed flat with floor
        mesh.position.set(150, 150, 0);
        mesh.rotation.y = Math.PI;
        mesh.rotation.z = Math.PI;
        mesh.rotation.x = Math.PI;
        mesh.scale.set(2, 2, 2);
        scene.add(mesh);

        });
    });
	     mtlLoader.load("models/sconcelight/eb_sconce_light_01.mtl", function(materials){

        materials.preload();
        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);

        objLoader.load("models/sconcelight/eb_sconce_light_01.obj",function(mesh){
           //need to change position and make bed flat with floor
        mesh.position.set(-150, 150, 0);
        mesh.rotation.y = Math.PI;
        mesh.rotation.z = Math.PI;
        mesh.rotation.x = Math.PI;
        mesh.scale.set(2, 2, 2);
        scene.add(mesh);

        });
    });



    //Scene Groups
    var house = new THREE.Group();
    house.add(south1wall);
    house.add(south2wall);
    house.add(northwall);
    house.add(westwall);
    house.add(eastwall);
    house.add(floor);
    var walls = new THREE.Group();
    walls.add(eHall);
    walls.add(wHall);
    walls.add(room1Hall);
    walls.add(room2Hall);

    scene.add(house, walls, land, sun);

    //CAMERA
    var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 2, 5000);
    camera.position.set(0, 1700 , 0);
    camera.lookAt(new THREE.Vector3(0, 0, 0));

    //CONTROLS
    controls = new THREE.OrbitControls(camera, renderer.domElement);
    //controls.minPolarAngle = 0.5; //Minimal Rotation Lock
    //controls.maxPolarAngle = Math.PI / 2; //Max Rotation Lock
    // controls.minDistance = 0;
    //controls.maxDistance = 100;
    controls.update();
    var cameralight = new THREE.PointLight(new THREE.Color(1,1,1), 1);
    camera.add(cameralight);

    //RENDER UPDATE LOOP
    var myUpdateLoop = function()
    {
      renderer.render(scene, camera);
      controls.update();
      requestAnimationFrame(myUpdateLoop);
    };
    requestAnimationFrame(myUpdateLoop);

    //WINDOW RESIZE
    var MyResize = function()
    {
      var width = window.innerWidth;
      var height = window.innerHeight;
      renderer.setSize(width,height);
      camera.aspect = width/height;
      camera.updateProjectionMatrix();
      renderer.render(scene,camera);
    };
    window.addEventListener('resize', MyResize);

    /*
    var camera = new THREE.PerspectiveCamera( 25, window.innerWidth / window.innerHeight, 1, 1000 );
	  camera.position.set( 15, 10, - 15 );
    //

    //
    renderer = new THREE.WebGLRenderer( { antialias: true } );
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth, window.innerHeight );
		document.body.appendChild( renderer.domElement );
    //
    controls = new THREE.OrbitControls( camera, renderer.domElement );
		controls.screenSpacePanning = true;
		controls.minDistance = 5;
		controls.maxDistance = 40;
		controls.target.set( 0, 2, 0 );
		controls.update();
    //
    function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight );
        renderer.render(scene, camera);
			}
    */

//GUI
//GUI
  buildGui();

function buildGui() {
  var params = {
    sofa : false,
    table : false,
    wood : false,
    vinyl : false,
    //FROM MASTER
    bed : false,
    cupboard : false,
    tv : false,
    bench : false,
    sink : false,
    grass : false,
    concrete: false,
    asphalt: false,
    brick: false,
    render: false,
    tiles: false,
    timberFloor: false,
  }
  var Cube = {
    Cube:function(){ CubeSpawner() }
  };
  var Sofa = {
    Sofa:function() { SofaSpawner() }
  };
  var gOn = {
    gridOn:function(){ enableGrid() }
  };
  var gOff = {
    gridOff:function(){ disableGrid() }
  };

  var bOn = {
    BorderCubeOn:function(){ borderCubeOn() }
  };
  var bOff = {
    BorderCubeOff:function(){ borderCubeOff() }
  };

  var Camo = {
    Camo:function(){ CamoTexture() }
  };

  var Bw = {
    BlackWhite:function(){ BWTexture() }
  };

  window.onload = function(){
    var gui = new dat.GUI({height: 2 * 32 - 1});

    var mod_drop = gui.addFolder("Models");
    mod_drop.add(Cube,'Cube');
    mod_drop.add(Sofa,'Sofa');
    //FROM MASTER
    mod_drop.add(params,'bed').name("Bed");
    mod_drop.add(params,'cupboard').name("Cupboard");
    mod_drop.add(params,'tv').name("Television");
    mod_drop.add(params,'bench').name("Kitchen bench");
    mod_drop.add(params,'sink').name("Kitchen sink");

    var tex_drop = gui.addFolder("Textures");
    tex_drop.add(Camo,'Camo');
    tex_drop.add(Bw,'BlackWhite');
    //FROM MASTER
    tex_drop.add(params, 'grass').name("Grass"); //land
    tex_drop.add(params, 'concrete').name("Concrete"); //land
    tex_drop.add(params, 'asphalt').name("Asphalt"); //land

    tex_drop.add(params, 'brick').name("Brick"); //houseWall
    tex_drop.add(params, 'render').name("Cement Render"); //houseWall

    tex_drop.add(params, 'tiles').name("Tiles"); //houseFloor
    tex_drop.add(params, 'timberFloor').name("Timber Flooring"); //houseFloor

    var func_drop = gui.addFolder("Functions");

    func_drop.add(gOn,'gridOn');
    func_drop.add(gOff,'gridOff');
    func_drop.add(bOn,'BorderCubeOn');
    func_drop.add(bOff,'BorderCubeOff');

    gui.open();
  }
}

//MAX SHIT PLZ NO TOUCHY
//Cube TEXTURES
function Spinner() {
  selectedObject.rotation.z += Math.PI / 2;
}

function borderCubeOn() {

  tranMaterial.opacity = .25;
}
function borderCubeOff() {

  tranMaterial.opacity = 0;
}
function CamoTexture() {
  selectedObject.traverse(function(child) {
      if (child instanceof THREE.Mesh){
          child.material = material_camo;
          MaterialStore = material_camo;
      }
});
}
function BWTexture() {
selectedObject.traverse(function(child) {
    if (child instanceof THREE.Mesh){
        child.material = material_bw;
        MaterialStore = material_bw;
    }
});
}

//Spawner
function CubeSpawner() {
      var geometry_cube = new THREE.BoxGeometry(100,100,100);
      var cube_mesh = new THREE.Mesh(geometry_cube,tranMaterial);
      cube_mesh.position.x= 50;
      cube_mesh.position.z= 0;
      cube_mesh.position.y = 60;
      tranMaterial.opacity = .5;
      scene.add(cube_mesh);



      RaycasterObjects.push(cube_mesh);
    }
var couch;
function SofaSpawner(){
         //load a couch object and material

//transparent Cube For Sofa
var geometry_cube_sofa = new THREE.BoxGeometry(100,100,300);
var cube_mesh_sofa = new THREE.Mesh(geometry_cube_sofa,tranMaterial);
cube_mesh_sofa.position.x= 300;
cube_mesh_sofa.position.z= 0;
cube_mesh_sofa.position.y = 60;
scene.add(cube_mesh_sofa);
RaycasterObjects.push(cube_mesh_sofa);
couch = cube_mesh_sofa;

//    var mtlLoader = new THREE.MTLLoader();
  //  mtlLoader.load('models/sofa/sofa.mtl', function(materials){

    //    materials.preload();
        var objLoader = new THREE.OBJLoader();
      //  objLoader.setMaterials(materials);
        loader.load("models/sofa/sofa.obj",function(sofa_mesh){

        sofa_mesh.position.set(0, -50, 0);
        sofa_mesh.rotation.y = 4.7;
        sofa_mesh.scale.set(.75, .75, .75);
        cube_mesh_sofa.add(sofa_mesh);
        });
  //  });

}

//Grid
var Gridsize = 1000;
      var Griddivisions = 10;
      var red = new THREE.Color(0xff0026);

      var gridHelper = new THREE.GridHelper( Gridsize, Griddivisions, red , red);
    //  scene.add( gridHelper );
      gridHelper.rotation.x = 0;
      gridHelper.position.z = 0;
      gridHelper.position.y = 11;
      gridHelper.Color = red;

      function disableGrid(){
        scene.remove( gridHelper );
      }
      function enableGrid(){
        scene.add( gridHelper );
      }

//PICKING CODE
      var MyUpdateLoop = function ( )
      {
      renderer.render(scene,camera);
      requestAnimationFrame(MyUpdateLoop);
      };

      requestAnimationFrame(MyUpdateLoop);
      var selectedObject = null;
      var raycaster = new THREE.Raycaster();

      var UsedCoords = [];

      var MaterialStore;

      var RaycasterObjects = [];
      RaycasterObjects.push(floor);
    //  RaycasterObjects.push(floor);

      var onMouseDown = function(event) {
            var coordinates = new THREE.Vector3();
            coordinates.x = event.clientX / renderer.domElement.clientWidth*2 - 1;
                coordinates.y = -(event.clientY / renderer.domElement.clientHeight*2 - 1);
            raycaster.setFromCamera(coordinates, camera);

            var intersects = raycaster.intersectObjects(RaycasterObjects, false);
            if (intersects.length > 0) {

              if (selectedObject != null) {

                var CurrentCoord = Coord(selectedObject.position.x, selectedObject.position.z) ;
                //console.log(CurrentCoord);
                for (i = 0; i < UsedCoords.length; i++) {
                 if (CurrentCoord == UsedCoords[i]) {
                   UsedCoords.splice(i,1);
                   console.log("Coord: "+CurrentCoord+" Removed");
                 }
               }

              var pos = intersects[0].point;
               var CoordToCheck = Coord(setX(pos.x), setZ(pos.z));
               var Used = false;
               for (i = 0; i < UsedCoords.length; i++) {
                if (CoordToCheck == UsedCoords[i]) {
                  console.log('Coord Is Occupied');
                  Used = true;

                }
              }
              if (Used == false) {
                UsedCoords.push(CoordToCheck);
                console.log("Coord: "+CoordToCheck  +" was added");
                selectedObject.position.x = setX(pos.x);
                selectedObject.position.z = setZ(pos.z);
                selectedObject.material = MaterialStore;
                MaterialStore = null;
                selectedObject = null;
              }
        }


      else if (selectedObject == null && intersects[0].object != floor && intersects[0].object != gridHelper ){
        selectedObject = intersects[0].object;
        if (intersects[0].object == couch){
          console.log("FUck yeah");
        }

                MaterialStore = selectedObject.material;
                selectedObject.material = material_flower;
    }
      }
    }

    document.addEventListener('mousedown', onMouseDown);

    function setX(X) {
            var X2 = X/100;
            var low = Math.floor(X2);
            var high = Math.ceil(X2);
            var mid = (low + high)*.5;
            return mid*100;
          }

          function setZ(Z) {
            var Z2 = Z/100
            var low = Math.floor(Z2);
            var high = Math.ceil(Z2);
            var mid = (low + high)*.5;
            return mid*100;
          }

          function Coord(X, Z) {
            X = X/100;
            Z = Z/100;
            var CoordText = ('X:'+X+' Z:'+Z);
            return CoordText

          }
      var camo_texture = new THREE.TextureLoader().load('texture/camo.jpg');
      var bw_texture = new THREE.TextureLoader().load('texture/bw.jpg');
      var flower_texture = new THREE.TextureLoader().load('texture/flowers.jpg');


      var material_camo = new THREE.MeshPhongMaterial();
          material_camo.color=  new THREE.Color(1,1,1);
          material_camo.map = camo_texture;
          material_camo.wireframe=false;

      var material_bw = new THREE.MeshLambertMaterial();
          material_bw.color=  new THREE.Color(1,1,1);
          material_bw.map = bw_texture;
          material_bw.wireframe=false;

      var tranMaterial = new THREE.MeshLambertMaterial( { transparent: true } );
      tranMaterial.opacity = .25;

      var material_flower = new THREE.MeshLambertMaterial();
          material_flower.color=  new THREE.Color(1,1,1);
          material_flower.map = flower_texture
          material_flower.wireframe=false;
	  var controls = new function () {
            this.showVideo = false;
            this.rotate = false;
            this.showCanvas = function () {
                if (controls.showVideo) {
                    $('#video').show();
                } else {
                    $('#video').hide();
                }
            }
        };
	 var gui = new dat.GUI();
        gui.add(controls, "rotate");
        gui.add(controls, "showVideo").onChange(controls.showCanvas);

</script>
  </body>
</html>
